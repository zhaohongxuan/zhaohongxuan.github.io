---
layout: post
title:  "微信内置浏览器js/css缓存解决办法"
keywords: "微信缓存"
date: 2015-09-28
category: web开发
tags: js
---

情况是这样的，最近在微信公众号的后台更改js代码提交之后，过了很长时间，代码都没有起效，于是清除服务器缓存，清除微信缓存，重新关注公众号，重启手机都用了还是不行，
但是用同事的手机（之前没有关注该公众号）js代码就起效了，后来才发现是微信内置浏览器缓存的问题。

## 解决方法
在jsp页面中通过给js文件传递一个随机数或者时间戳在这里用随机数

```html
<script type="text/javascript" src="/js/weixin.js?r=<%=Math.random()%>"></script>
```
<!-- more -->

由于每次加载该js文件，请求路径都是不一致的，所以服务器会认为是不同的请求所以会实时把最新的js文件同步到浏览器，就不怕浏览器缓存的问题了。

